<!DOCTYPE html>
<html>
<head>
    <title>Sudoku Alarm</title>
    <style>
        body { 
            background-color: #f0f0f0; 
            font-family: Arial; 
            text-align: center; 
        }
        .box {
            background: white;
            width: 300px;
            margin: 50px auto;
            padding: 20px;
            border: 2px solid black;
            border-radius: 10px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 50px);
            gap: 5px;
            justify-content: center;
            margin: 20px 0;
        }
        input.cell {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 20px;
            border: 1px solid #000;
        }
        .fixed { background-color: #eee; }
        .hide { display: none; }
        
        button {
            padding: 10px;
            width: 100%;
            cursor: pointer;
            margin-top: 5px;
        }
    </style>
</head>
<body>

    <div id="setup" class="box">
        <h1>SudokuWake</h1>
        <p>Enter Time:</p>
        <input type="time" id="userTime" style="font-size: 25px;">
        <br><br>
        <button onclick="saveAlarm()" style="background: skyblue;">SET ALARM</button>
    </div>

    <div id="puzzle" class="box hide">
        <h2 style="color: red;">WAKE UP!</h2>
        <p id="diffText">Level: Normal</p>
        
        <div class="grid" id="sudokuGrid"></div>
        
        <button onclick="checkAnswer()" style="background: lightgreen;">STOP ALARM</button>
        <button onclick="snooze()" style="background: orange;">SNOOZE (Next level is hard)</button>
    </div>

    <div id="done" class="box hide">
        <h1>Congratulations!</h1>
        <p>Your alarm is stopped.</p>
        <p><i>"Have a nice day"</i></p>
        <button onclick="location.reload()">Reset</button>
    </div>

    <audio id="mySound" loop>
        <source src="mixkit-digital-clock-digital-alarm-buzzer-992.wav" type="audio/wav">
    </audio>

    <script>
        let answers = [1, 2, 3, 4, 3, 4, 1, 2, 2, 3, 4, 1, 4, 1, 2, 3];
        let level = "normal";
        let myAlarm = document.getElementById("mySound");
        let alarmTimer; 

        function saveAlarm() {
            let time = document.getElementById("userTime").value;
            if(time == "") {
                alert("Please set a time!");
                return;
            }
            alert("Alarm set for " + time);

            alarmTimer = setInterval(function() { 
                let now = new Date();
                let currentTime = now.getHours().toString().padStart(2, '0') + ":" +  
                                  now.getMinutes().toString().padStart(2, '0');
                
                if(currentTime == time) {
                    clearInterval(alarmTimer); 
                    startPuzzle();
                }
            }, 1000);
        }

        function startPuzzle() {
            document.getElementById("setup").classList.add("hide");
            document.getElementById("puzzle").classList.remove("hide");
            myAlarm.play();

            let gridDiv = document.getElementById("sudokuGrid");
            gridDiv.innerHTML = ""; 

            let hideThese = [0, 3, 6, 9]; 
            if(level == "hard") {
                hideThese = [0, 1, 2, 3, 5, 7, 10, 12, 15]; 
                document.getElementById("diffText").innerText = "Level: HARD MODE";
            }

            for(let i=0; i < 16; i++) {
                let input = document.createElement("input");
                input.className = "cell";
                
                if(hideThese.includes(i)) {
                    input.value = ""; 
                } else {
                    input.value = answers[i];
                    input.readOnly = true;
                    input.classList.add("fixed");
                }
                gridDiv.appendChild(input);
            }
        }

        function snooze() {
            myAlarm.pause();
            level = "hard"; 
            document.getElementById("puzzle").classList.add("hide");
            alert("Snoozed! Alarm will return in 10 seconds in HARD mode.");
            
            setTimeout(startPuzzle, 10000);
        }

        function checkAnswer() {
            let inputs = document.getElementsByClassName("cell");
            let win = true;

            for(let i=0; i < 16; i++) {
                if(inputs[i].value != answers[i]) {
                    win = false;
                }
            }

            if(win == true) {
                myAlarm.pause();
                document.getElementById("puzzle").classList.add("hide");
                document.getElementById("done").classList.remove("hide");
            } else {
                alert("Wrong! Try again.");
            }
        }
    </script>
</body>
</html>